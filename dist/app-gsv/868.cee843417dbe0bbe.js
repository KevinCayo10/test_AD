"use strict";(self.webpackChunkappGSV=self.webpackChunkappGSV||[]).push([[868],{8868:(L,d,s)=>{s.r(d),s.d(d,{UsuariosModule:()=>P});var c=s(6895),f=s(1667),p=s(5226),u=s.n(p),C=s(9849),o=s(4650),v=s(7620),h=s(9828),_=s(7284),Z=s(4841),b=s(6846),T=s(9536),U=s(7653),a=s(433);let E=(()=>{class e{constructor(){this.titulo="",this.formularioEnviado=new o.vpe,this.formularioCerrado=new o.vpe}ngOnInit(){this.cargarFormulario()}cargarFormulario(){this.formulario=new a.cw({id_usuario:new a.NI(this.data?.id_usuario),cedula:new a.NI(this.data?.cedula,a.kI.required),nombre:new a.NI(this.data?.nombre,a.kI.required),apellido:new a.NI(this.data?.apellido,a.kI.required),correo:new a.NI(this.data?.correo,a.kI.required),contrasena:new a.NI(this.data?.contrasena,a.kI.required),rol:new a.NI(this.data?.rol,a.kI.required)})}grabar(){if(this.formulario.valid){const t=this.formulario.value;console.log(t),this.formularioEnviado.emit(t)}}cerrarFormulario(){this.formularioCerrado.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["gsv-form"]],inputs:{data:"data"},outputs:{formularioEnviado:"formularioEnviado",formularioCerrado:"formularioCerrado"},decls:65,vars:2,consts:[[1,"container","col-md-10"],[1,"card","custom-card"],[1,"card-body"],[1,"form-container",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],[1,"mb-3"],["for","cedula",1,"form-label"],[1,"input-group"],["type","text","id","cedula","formControlName","cedula",1,"form-control"],[1,"input-group-text"],[1,"fas","fa-id-card"],["for","nombre",1,"form-label"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],[1,"fas","fa-user"],["for","apellido",1,"form-label"],["type","text","id","apellido","formControlName","apellido",1,"form-control"],["for","correo",1,"form-label"],["type","email","id","correo","formControlName","correo",1,"form-control"],[1,"fas","fa-envelope"],["for","contrasena",1,"form-label"],["type","password","id","contrasena","formControlName","contrasena",1,"form-control"],[1,"fas","fa-lock"],["for","rol",1,"form-label"],["id","rol","formControlName","rol",1,"form-control"],["value","ESTUDIANTE"],["value","DOCENTE"],[1,"fas","fa-user-tag"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],[1,"fas","fa-save"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),o.NdJ("ngSubmit",function(){return r.grabar()}),o.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),o._uU(8,"C\xe9dula"),o.qZA(),o.TgZ(9,"div",8),o._UZ(10,"input",9),o.TgZ(11,"span",10),o._UZ(12,"i",11),o.qZA()()()(),o.TgZ(13,"div",5)(14,"div",6)(15,"label",12),o._uU(16,"Nombre"),o.qZA(),o.TgZ(17,"div",8),o._UZ(18,"input",13),o.TgZ(19,"span",10),o._UZ(20,"i",14),o.qZA()()()(),o.TgZ(21,"div",5)(22,"div",6)(23,"label",15),o._uU(24,"Apellido"),o.qZA(),o.TgZ(25,"div",8),o._UZ(26,"input",16),o.TgZ(27,"span",10),o._UZ(28,"i",14),o.qZA()()()()(),o.TgZ(29,"div",4)(30,"div",5)(31,"div",6)(32,"label",17),o._uU(33,"Correo Electr\xf3nico"),o.qZA(),o.TgZ(34,"div",8),o._UZ(35,"input",18),o.TgZ(36,"span",10),o._UZ(37,"i",19),o.qZA()()()(),o.TgZ(38,"div",5)(39,"div",6)(40,"label",20),o._uU(41,"Contrase\xf1a"),o.qZA(),o.TgZ(42,"div",8),o._UZ(43,"input",21),o.TgZ(44,"span",10),o._UZ(45,"i",22),o.qZA()()()(),o.TgZ(46,"div",5)(47,"div",6)(48,"label",23),o._uU(49,"Rol"),o.qZA(),o.TgZ(50,"div",8)(51,"select",24)(52,"option",25),o._uU(53,"ESTUDIANTE"),o.qZA(),o.TgZ(54,"option",26),o._uU(55,"DOCENTE"),o.qZA()(),o.TgZ(56,"span",10),o._UZ(57,"i",27),o.qZA()()()()(),o.TgZ(58,"div",28)(59,"button",29),o._UZ(60,"i",30),o._uU(61," Grabar "),o.qZA(),o.TgZ(62,"button",31),o.NdJ("click",function(){return r.cerrarFormulario()}),o._UZ(63,"i",32),o._uU(64," Cancelar "),o.qZA()()()()()()),2&t&&(o.xp6(3),o.Q6J("formGroup",r.formulario),o.xp6(56),o.Q6J("disabled",r.formulario.invalid))},dependencies:[a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.sg,a.u]}),e})();var g=s(7155);function A(e,n){if(1&e&&(o.TgZ(0,"th"),o._uU(1),o.qZA()),2&e){const t=n.$implicit;o.xp6(1),o.Oqu(t.title)}}function N(e,n){if(1&e&&(o.TgZ(0,"td"),o._uU(1),o.qZA()),2&e){const t=n.$implicit,r=o.oxw().$implicit;o.xp6(1),o.Oqu(r[t.field])}}function y(e,n){if(1&e){const t=o.EpF();o.TgZ(0,"tr"),o.YNc(1,N,2,1,"td",2),o.TgZ(2,"td")(3,"button",3),o.NdJ("click",function(){const l=o.CHM(t).$implicit,m=o.oxw();return o.KtG(m.accionEditar(l))}),o._UZ(4,"i",4),o.qZA(),o.TgZ(5,"button",5),o.NdJ("click",function(){const l=o.CHM(t).$implicit,m=o.oxw();return o.KtG(m.accionEliminar(l.cedula))}),o._UZ(6,"i",6),o.qZA()()()}if(2&e){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.metaDataColumns)}}let F=(()=>{class e{constructor(){this.onClick=new o.vpe,this.onClickEliminar=new o.vpe,this.columns=[]}ngOnChanges(t){t.metaDataColumns&&(this.columns=this.metaDataColumns.map(r=>r.field))}accionEditar(t){this.onClick.emit(t)}accionEliminar(t){u().fire({title:"\xbfEst\xe1 seguro que desea eliminar este elemento?",icon:"warning",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(r=>{r.isConfirmed&&this.onClickEliminar.emit(t)})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["gsv-table-users"]],contentQueries:function(t,r,i){if(1&t&&o.Suo(i,g.w1,5),2&t){let l;o.iGM(l=o.CRH())&&(r.columnsDef=l)}},viewQuery:function(t,r){if(1&t&&o.Gf(g.BZ,7),2&t){let i;o.iGM(i=o.CRH())&&(r.table=i.first)}},inputs:{data:"data",metaDataColumns:"metaDataColumns",title:"title"},outputs:{onClick:"onClick",onClickEliminar:"onClickEliminar"},features:[o.TTD],decls:7,vars:2,consts:[[1,"container"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"btn","btn-secondary",3,"click"],[1,"fa","fa-pencil"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr"),o.YNc(4,A,2,1,"th",2),o.qZA()(),o.TgZ(5,"tbody"),o.YNc(6,y,7,1,"tr",2),o.qZA()()()),2&t&&(o.xp6(4),o.Q6J("ngForOf",r.metaDataColumns),o.xp6(2),o.Q6J("ngForOf",r.data))},dependencies:[c.sg]}),e})();function w(e,n){if(1&e){const t=o.EpF();o.TgZ(0,"gsv-search",5),o.NdJ("buscadorEnviado",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.buscarData(i))}),o.qZA()}}function k(e,n){if(1&e){const t=o.EpF();o.TgZ(0,"gsv-form",6),o.NdJ("formularioEnviado",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.grabarFormulario(i))})("formularioCerrado",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.cerrarFormulario())}),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("data",t.fila)}}const J=[{path:"",component:(()=>{class e{constructor(t){this.usuarioService=t,this.registros=[{_id:1,cedula:"1702",nombre:"Juan",apellido:"P\xe9rez",correo:"juan.perez@mail.com",direccion:"Av. Quito",celular:"0991234567",contrase\u00f1a:"123",rol:"Estudiante"}],this.title="USUARIOS",this.metaDataColumns=[{field:"id_usuario",title:"ID"},{field:"cedula",title:"CEDULA"},{field:"nombre",title:"NOMBRE"},{field:"apellido",title:"APELLIDO"},{field:"correo",title:"CORREO"},{field:"contrasena",title:"CONTRASE\xd1A"},{field:"rol",title:"ROL"}],this.keypadButtons=[{icon:"fa-solid fa-cloud-arrow-down",color:"btn-success",accion:"download"},{icon:"fa-solid fa-plus",color:"btn-primary",accion:"NUEVO"}],this.data=[],this.totalRegistros=this.data.length,this.cargarClientes("")}cargarClientes(t){this.usuarioService.cargarUsuarios().subscribe(r=>{this.registros=r,t&&(console.log(t),this.registros=this.registros.filter(i=>i.cedula.toLowerCase().includes(t.toLowerCase())),console.log(this.registros)),this.totalRegistros=this.registros.length,this.changePage(0)})}changePage(t){const r=C.N.PAGE_SIZE,i=r*t;this.data=this.registros.slice(i,i+r)}enviarAccion(t){switch(t){case"DOWNLOAD":break;case"NUEVO":this.formulario=!0,this.abrirFormulario()}}accionEditar(t){this.formulario=!0,this.abrirFormulario(t)}accionEliminar(t){console.log("Entro a pagelis"),this.usuarioService.eliminarUsuario(t).subscribe(()=>{console.log(t),this.cargarClientes("")})}buscarData(t){console.log(t),this.cargarClientes(t.terminoBusqueda)}grabarFormulario(t){if(t)if(t.cedula){const r={...t};console.log("Entro al ID"),console.log(r),this.usuarioService.actualizarUsuario(t.cedula,r).subscribe(()=>{this.cargarClientes(""),this.formulario=!1,this.mostrarMensajeActualizacion()})}else{const r={...t};this.usuarioService.registrarUsuario(r).subscribe(()=>{console.log("Dentro regsitrar"),console.log(r),this.cargarClientes(""),this.formulario=!1,this.mostrarMensajeA\u00f1adir()})}else this.formulario=!1}abrirFormulario(t=null){this.fila=t}cerrarFormulario(){this.formulario=!1}mostrarMensajeActualizacion(){u().fire({title:"Registro actulaizado",icon:"info",timer:3e3,showConfirmButton:!1})}mostrarMensajeA\u00f1adir(){u().fire({title:"Registro a\xf1adido",icon:"info",timer:3e3,showConfirmButton:!1})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(v.i))},e.\u0275cmp=o.Xpm({type:e,selectors:[["gsv-page-list"]],decls:9,vars:7,consts:[[3,"buscadorEnviado",4,"ngIf"],[3,"data","formularioEnviado","formularioCerrado",4,"ngIf"],[3,"data","metaDataColumns","title","onClick","onClickEliminar"],[3,"length","onChangePage"],[3,"keypadButtons","onClick"],[3,"buscadorEnviado"],[3,"data","formularioEnviado","formularioCerrado"]],template:function(t,r){1&t&&(o.TgZ(0,"div"),o._UZ(1,"gsv-title"),o.YNc(2,w,1,0,"gsv-search",0),o.qZA(),o.YNc(3,k,1,1,"gsv-form",1),o.TgZ(4,"gsv-container")(5,"perfect-scrollbar")(6,"gsv-table-users",2),o.NdJ("onClick",function(l){return r.accionEditar(l)})("onClickEliminar",function(l){return r.accionEliminar(l)}),o.qZA()(),o.TgZ(7,"gsv-paginator",3),o.NdJ("onChangePage",function(l){return r.changePage(l)}),o.qZA()(),o.TgZ(8,"gsv-keypad-button",4),o.NdJ("onClick",function(l){return r.enviarAccion(l)}),o.qZA()),2&t&&(o.xp6(2),o.Q6J("ngIf",!r.formulario),o.xp6(1),o.Q6J("ngIf",r.formulario),o.xp6(3),o.Q6J("data",r.data)("metaDataColumns",r.metaDataColumns)("title",r.title),o.xp6(1),o.Q6J("length",r.totalRegistros),o.xp6(1),o.Q6J("keypadButtons",r.keypadButtons))},dependencies:[c.O5,h.r,_.e,Z.Vv,b.J,T.o,U.g,E,F]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[f.Bz.forChild(J),f.Bz]}),e})();var I=s(8366);let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[c.ez,x,I.m]}),e})()}}]);